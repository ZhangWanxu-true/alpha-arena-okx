# 📝 项目更新日志

## 2025-10-28

### ⏰ 时间显示功能更新

**新增功能**:
- ✅ Web界面右上角同时显示北京时间和服务器时间
- ✅ 实时更新（每秒刷新）
- ✅ 美化设计，使用等宽字体
- ✅ 响应式布局，支持移动端

**修改文件**:
- `templates/index.html` - 添加双时间显示区域
- `static/js/app.js` - 添加时间更新函数
- `static/css/style.css` - 添加时间显示样式
- `web_server.py` - 添加 `/api/time` 接口
- `app.py` - 添加 `/api/time` 接口（宝塔部署）
- `deepseekok2.py` - 添加pytz导入
- `requirements.txt` - 添加pytz依赖

**使用说明**: 查看 [时间显示更新说明.md](时间显示更新说明.md)

---

## 2025-10-27

### 🛡️ 进程守护机制更新

**新增功能**:
- ✅ 进程守护系统（自动监控和重启）
- ✅ AI决策超时检测（5分钟无响应自动重启）
- ✅ 进程崩溃自动恢复
- ✅ API调用重试机制（3次，指数退避）
- ✅ 详细日志记录

**新增文件**:
- `process_guardian.py` - 进程守护主程序
- `start_guardian.bat` - Windows启动脚本
- `start_guardian.sh` - Linux/macOS启动脚本
- `test_guardian.py` - 测试工具
- `GUARDIAN_GUIDE.md` - 守护机制详细指南
- `QUICK_START.md` - 快速开始指南
- `更新说明.md` - 详细更新说明

**修改文件**:
- `deepseekok2.py` - 增强异常处理和重试机制
- `requirements.txt` - 添加psutil依赖
- `README.md` - 添加守护模式说明
- `.gitignore` - 添加日志文件忽略

**使用说明**: 查看 [GUARDIAN_GUIDE.md](GUARDIAN_GUIDE.md)

---

### 🎛️ 宝塔面板部署支持

**新增功能**:
- ✅ 统一入口文件（app.py）
- ✅ 集成Web服务 + 交易机器人 + 健康监控
- ✅ 宝塔面板一键部署
- ✅ 自动重启机制

**新增文件**:
- `app.py` - 宝塔面板部署入口文件
- `宝塔面板部署指南.md` - 详细部署教程

**使用说明**: 查看 [宝塔面板部署指南.md](宝塔面板部署指南.md)

---

## 功能对比

| 功能 | 初始版本 | 守护机制 | 时间显示 |
|------|----------|----------|----------|
| AI决策监控 | ❌ | ✅ | ✅ |
| 自动重启 | ❌ | ✅ | ✅ |
| 时间显示 | 单一时间 | 单一时间 | 双时间 |
| 宝塔部署 | ❌ | ❌ | ✅ |
| 健康检查 | ❌ | ✅ | ✅ |
| 日志记录 | 基础 | 详细 | 详细 |

---

## 升级步骤

### 从旧版本升级

```bash
# 1. 拉取最新代码
git pull origin main

# 2. 更新依赖
pip install -r requirements.txt

# 3. 重启服务
# 本地环境
python web_server.py

# 宝塔面板
在Python项目管理器中重启

# Docker
docker-compose restart
```

---

## 下一步计划

- [ ] 添加更多时区支持
- [ ] 12/24小时制切换
- [ ] 性能监控面板
- [ ] 历史收益统计
- [ ] 交易策略优化
- [ ] 邮件/短信告警

---

## 反馈和问题

如有问题或建议，请：
1. 查看相关文档
2. 查看日志文件
3. 提交Issue

---

**最后更新**: 2025-10-28  
**版本**: v2.1.0

